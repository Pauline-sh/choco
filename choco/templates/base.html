<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="keywords" content="подарок, сувенир, береста, шоколад">
        <meta name="description" content="Оригинальный русский сувенир">
        <!--meta name="viewport" content="width=device-width, initial-scale=1"-->
        <title>Russian Memento</title>

        {% load static %}
        <link rel="stylesheet" type="text/css" href="{% static 'choco/css/normalize.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'choco/css/main.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'choco/css/header.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'choco/css/sidecart.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'choco/css/catalog.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'choco/css/cart.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'choco/css/details.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'choco/css/forms.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'choco/css/home.css' %}">

        <script src="{% static 'choco/jquery/jquery-3.1.1.min.js' %}"></script>
        <script src="{% static 'choco/js/polyfill.js' %}"></script>
        <script src="{% static 'choco/js/cart.js' %}"></script>
        <script src="{% static 'choco/js/sidecart.js' %}"></script>
        <script src="{% static 'choco/js/gallery.js' %}"></script>

		{% block styles %}
        {% endblock %}
    </head>

	{% load rupluralize_filter %}
    {% load staticfiles %}

    <body>
        {% csrf_token %}
        <div id="content">
            <div class="header">
                <div class="logo">Русский сувенир</div>
                <div class="header-menu">
                    <div><a href="{% url 'choco:home' %}">Главная</a></div>
                    <div><a href="{% url 'choco:catalog_choco' %}">Из шоколада</a></div>
                    <div><a href="{% url 'choco:catalog_beresta' %}">Из бересты</a></div>
                    <div><a href="{% url 'choco:catalog_wood' %}">Из дерева</a></div>
                    <div><a href="{% url 'choco:contacts' %}">Контакты</a></div>
                    <div><a id="open-cart" href="#">
                        <img class="shopping-cart" src="{% static 'choco/images/shopping-cart.svg' %}">
                        <span class="cart-fill" id="total-items">
							{% with total_items=cart|length %}
                                {% if cart|length > 0 %}
                                        {{ total_items }}
                                    {% else %}
                                        0
                                {% endif %}
                            {% endwith %}
						</span>
                    </a></div>
                </div>
                <hr>
                <div id="gift-banner">
                    <a href="{% url 'choco:gift'%}">
                        <img src="{% static 'choco/images/gift_banner.png'%}">
                    </a>
                </div>
                <hr>
            </div>

            <div id="side-cart">
                <div class="cart-top">
                    <a id="close-cart" href="javascript:void(0)">✕</a>
                    <div class="cart-title">Корзина</div>
                    <div class="placeholder"></div>
                </div>
                <div class="cart-content" id="cart-content">
                    {% if cart|length < 1 %}
                        <div class="cart-empty">Корзина пуста!</div>
                    {% else %}
                        {% for item in cart %}
                            {% with product=item.product %}
                                <div class="cart-item" id="sidecart-item-{{item.product.id}}-{{item.configuration}}">
                                    <div class="wrapper">
                                        <div class="cart-item-image">
                                            {% if not product.choco_pic %}
                                                <img src="{% static 'choco/choco_pics/default.png' %}"/>
                                            {% else %}
                                                {% with "choco/choco_pics/"|add:product.choco_dir|add:"/"|add:product.choco_pic as main_pic %}
                                                    <img src="{% static main_pic %}"/>
                                                {% endwith %}
                                            {% endif %}
                                        </div>
                                        <div class="cart-item-info">
                                            <div>{{ product.choco_name }}</div>
                                            {% with configuration=item.conf_object %}
                                                {% if configuration.weight %}
                                                    <div>Вес: {{ configuration.weight }} г</div>
                                                {% endif %}
                                            {% endwith %}
                                            <div id="sidecart-quantity-{{item.product.id}}-{{item.configuration}}">Количество: {{ item.quantity }}</div>
                                            <div>Цена: {{ item.total_price }} RUB</div>
                                        </div>
                                        <div class="delete-cross-wrap">
                                            <form class="cart-remove-item sidecart" action="" method="post">
                                                {% csrf_token %}
                                                <input type="hidden" class="choco-pk" value="{{ product.id }}">
                                                <input type="hidden" class="config-pk" value="{{ item.configuration }}">
                                                <input type="submit" value="✕">
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            {% endwith %}
                        {% endfor %}
                    {% endif %}
                </div>
                <div class="sidecart-btn">
                    <a href="{% url 'choco:cart' %}">Перейти в корзину</a>
                </div>
            </div>
            {% block content %}
            {% endblock %}
        </div>

        <!--div class="footer"><p class="test">dat me, bottom hook</p></div-->

        <div class="modal" id="img-modal">
            <div class="modal-body">
                <div class="close-modal">✕</div>
                <img src="">         
            </div>
        </div>

        <div class="modal" id="catalog-modal">
            <div class="modal-body">
                <div id="catalog-modal-main">

                </div>
            </div>
            <div class="close-modal-outside">✕</div>
        </div>
    </body>
</html>
