{% extends 'base.html' %}

<!-- эта строка для отображения изображений из папки static -->
{% load staticfiles %}

{% block styles %}
	<link rel="stylesheet" type="text/css" href="{% static 'choco/css/catalog.css' %}">

{% endblock %}

{% block content %}
    <div id="assortment">
        {% if chocos|length < 1 %}
            <p>Сейчас ассортимент пуст. Заходите позже!</p>
        {% else %}
            {% for item in chocos %}
                <div class="item-wrap">
                    <div class="item-image">
                        <img src="{% static item.choco_pic %}"/>
                    </div>
                    <div class="item-info">
                        <a href="{{ item.get_absolute_url }}">{{ item.choco_name }}</a>
                        <span>{{ item.choco_price }} RUB</span>
                    </div>
                    
                    <form action="{% url 'choco:cart_add' item.id %}" method="post">
                        {% csrf_token %}
                        <div style="display: none">{{ cart_form.quantity }}</div>
                        {{ cart_form.update }}
                        <input type="submit" value="Добавить в корзину">
                    </form>
                </div>
            {% endfor %}
        {% endif %}
    </div>

    <div class="pagination">
        <span class="step-links">
            {% if chocos.has_previous %}
                <a href="?page={{ chocos.previous_page_number }}">Назад</a>
            {% endif %}
            {% for pg in chocos.paginator.page_range %}
                {% if chocos.number == pg %}
                  <a href="?page={{ pg }}">{{ pg }}</a>
                {% else %}
                  <a href="?page={{ pg }}">{{ pg }}</a>
                {% endif %}
          {% endfor %}
            {% if chocos.has_next %}
                <a href="?page={{ chocos.next_page_number }}">Вперед</a>
            {% endif %}
        </span>
    </div>
{% endblock %}
